<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be Happy With Me Forever?</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .lead-container {
            max-width: 600px;
            margin: 40px auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-family: 'Poppins', sans-serif;
            text-align: center;
        }
        .riddle {
            margin: 20px 0;
            font-size: 1.2em;
        }
        .answer-input {
            padding: 8px;
            font-size: 1em;
            width: 60%;
            border-radius: 5px;
            border: none;
            margin-right: 10px;
        }
        .submit-btn {
            padding: 8px 15px;
            font-size: 1em;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            background-color: #764ba2;
            color: white;
        }
        .error-message {
            color: #ff6b6b;
            margin-top: 10px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="lead-container">
        <h1>Our Journey Together</h1>

        <div id="riddle-container">
            <div class="riddle" id="riddle-1">
                <p>What can you break without touching it?</p>
                <input type="text" class="answer-input" id="answer-1" placeholder="Your answer...">
                <button class="submit-btn" onclick="checkAnswer(1)">Submit</button>
                <div class="error-message" id="error-1"></div>
            </div>
        </div>
    </div>

    <script>
        const riddles = [
            {
                question: "What can you break without touching it?",
                answer: "heart"
            },
            {
                question: "What is a gentle touch of lips?",
                answer: "kiss"
            },
            {
                question: "What is a warm embrace?",
                answer: "hug"
            },
            {
                question: "What lights up your face?",
                answer: "smile"
            },
            {
                question: "What is the feeling that binds us?",
                answer: ["love", "friendship"]
            }
        ];

        let currentRiddle = 0;

        function checkAnswer(index) {
            const input = document.getElementById(`answer-${index}`);
            const error = document.getElementById(`error-${index}`);
            const userAnswer = input.value.toLowerCase().trim();
            const correctAnswer = riddles[index - 1].answer;

            let isCorrect = false;
            if (Array.isArray(correctAnswer)) {
                isCorrect = correctAnswer.some(ans => ans.toLowerCase() === userAnswer);
            } else {
                isCorrect = userAnswer === correctAnswer.toLowerCase();
            }

            if (isCorrect) {
                error.textContent = "";
                currentRiddle++;
                if (currentRiddle < riddles.length) {
                    showNextRiddle(currentRiddle + 1);
                } else {
                    // All riddles answered, show final question
                    showFinalQuestion();
                }
            } else {
                error.textContent = "Try again!";
            }
        }

        function showNextRiddle(index) {
            const container = document.getElementById('riddle-container');
            const riddleDiv = document.createElement('div');
            riddleDiv.className = 'riddle';
            riddleDiv.id = `riddle-${index}`;
            riddleDiv.innerHTML = `
                <p>${riddles[index - 1].question}</p>
                <input type="text" class="answer-input" id="answer-${index}" placeholder="Your answer...">
                <button class="submit-btn" onclick="checkAnswer(${index})">Submit</button>
                <div class="error-message" id="error-${index}"></div>
            `;
            container.appendChild(riddleDiv);
            // Hide previous riddle
            if (index > 1) {
                const prevRiddle = document.getElementById(`riddle-${index - 1}`);
                if (prevRiddle) prevRiddle.style.display = 'none';
            }
        }

        function showFinalQuestion() {
            const container = document.getElementById('riddle-container');
            container.innerHTML = `
                <div class="riddle">
                    <p>“I’ve built this world from pixels and poems,
Lit candles with code and stitched stars into scrolls.
But one line remains unwritten—
Will you be the answer to my forever?”
</p>
                    <input type="text" class="answer-input" id="final-answer" placeholder="Your answer...">
                    <button class="submit-btn" onclick="checkFinalAnswer()">Submit</button>
                    <div class="error-message" id="final-error"></div>
                </div>
            `;
        }

        function checkFinalAnswer() {
            const input = document.getElementById('final-answer');
            const error = document.getElementById('final-error');
            const userAnswer = input.value.toLowerCase().trim();

            if (userAnswer === 'yes' || userAnswer === 'happy') {
                // Redirect to proposal page
                window.location.href = 'proposal.html';
            } else {
                error.textContent = 'Think about what makes you truly happy...';
                setTimeout(() => {
                    error.textContent = '';
                }, 3000);
            }
        }
    </script>
</body>
</html>
